create table sys_oper_log
(
    oper_id        bigint auto_increment comment '日志主键'
        primary key,
    title          varchar(50)   default '' null comment '模块标题',
    business_type  int           default 0  null comment '业务类型（0其它 1新增 2修改 3删除）',
    method         varchar(100)  default '' null comment '方法名称',
    request_method varchar(10)   default '' null comment '请求方式',
    operator_type  int           default 0  null comment '操作类别（0其它 1后台用户 2手机端用户）',
    oper_name      varchar(50)   default '' null comment '操作人员',
    dept_name      varchar(50)   default '' null comment '部门名称',
    oper_url       varchar(255)  default '' null comment '请求URL',
    oper_ip        varchar(128)  default '' null comment '主机地址',
    oper_location  varchar(255)  default '' null comment '操作地点',
    oper_param     varchar(2000) default '' null comment '请求参数',
    json_result    varchar(2000) default '' null comment '返回参数',
    status         int           default 0  null comment '操作状态（0正常 1异常）',
    error_msg      varchar(2000) default '' null comment '错误消息',
    oper_time      datetime                 null comment '操作时间',
    cost_time      bigint        default 0  null comment '消耗时间'
)
    comment '操作日志记录';

create index idx_sys_oper_log_bt
    on sys_oper_log (business_type);

create index idx_sys_oper_log_ot
    on sys_oper_log (oper_time);

create index idx_sys_oper_log_s
    on sys_oper_log (status);

INSERT INTO `ry-cloud`.sys_oper_log (oper_id, title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time) VALUES (1, '操作日志', 9, 'com.ruoyi.system.controller.SysOperlogController.clean()', 'DELETE', 1, 'admin', null, '/operlog/clean', '127.0.0.1', '', '{}', '{"msg":"操作成功","code":200}', 0, null, '2024-05-05 15:48:14', 49);
INSERT INTO `ry-cloud`.sys_oper_log (oper_id, title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time) VALUES (2, '菜单管理', 1, 'com.ruoyi.system.controller.SysMenuController.add()', 'POST', 1, 'admin', null, '/menu', '127.0.0.1', '', '{"children":[],"createBy":"admin","icon":"list","isCache":"0","isFrame":"1","menuName":"快速连接","menuType":"M","orderNum":4,"params":{},"parentId":0,"path":"1","status":"0","visible":"0"}', '{"msg":"操作成功","code":200}', 0, null, '2024-05-05 15:52:02', 41);
INSERT INTO `ry-cloud`.sys_oper_log (oper_id, title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time) VALUES (3, '菜单管理', 2, 'com.ruoyi.system.controller.SysMenuController.edit()', 'PUT', 1, 'admin', null, '/menu', '127.0.0.1', '', '{"children":[],"createTime":"2024-05-05 15:52:02","icon":"list","isCache":"0","isFrame":"1","menuId":2000,"menuName":"快速连接","menuType":"M","orderNum":4,"params":{},"parentId":0,"path":"/link","perms":"","status":"0","updateBy":"admin","visible":"0"}', '{"msg":"操作成功","code":200}', 0, null, '2024-05-05 15:52:46', 26);
INSERT INTO `ry-cloud`.sys_oper_log (oper_id, title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time) VALUES (4, '菜单管理', 2, 'com.ruoyi.system.controller.SysMenuController.edit()', 'PUT', 1, 'admin', null, '/menu', '127.0.0.1', '', '{"children":[],"createTime":"2024-05-05 15:52:02","icon":"list","isCache":"0","isFrame":"1","menuId":2000,"menuName":"快速连接","menuType":"M","orderNum":4,"params":{},"parentId":0,"path":"link","perms":"","status":"0","updateBy":"admin","visible":"0"}', '{"msg":"操作成功","code":200}', 0, null, '2024-05-05 15:53:34', 25);
INSERT INTO `ry-cloud`.sys_oper_log (oper_id, title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time) VALUES (5, '菜单管理', 2, 'com.ruoyi.system.controller.SysMenuController.edit()', 'PUT', 1, 'admin', null, '/menu', '127.0.0.1', '', '{"children":[],"createTime":"2024-05-05 14:20:25","icon":"guide","isCache":"0","isFrame":"0","menuId":4,"menuName":"若依官网","menuType":"M","orderNum":4,"params":{},"parentId":2000,"path":"http://ruoyi.vip","perms":"","query":"","status":"0","updateBy":"admin","visible":"0"}', '{"msg":"操作成功","code":200}', 0, null, '2024-05-05 15:54:40', 22);
INSERT INTO `ry-cloud`.sys_oper_log (oper_id, title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time) VALUES (6, '菜单管理', 1, 'com.ruoyi.system.controller.SysMenuController.add()', 'POST', 1, 'admin', null, '/menu', '127.0.0.1', '', '{"children":[],"createBy":"admin","icon":"eye-open","isCache":"0","isFrame":"1","menuName":"爬虫模块","menuType":"M","orderNum":5,"params":{},"parentId":0,"path":"crawler","status":"0","visible":"0"}', '{"msg":"操作成功","code":200}', 0, null, '2024-05-06 11:51:14', 30);
INSERT INTO `ry-cloud`.sys_oper_log (oper_id, title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time) VALUES (7, '菜单管理', 1, 'com.ruoyi.system.controller.SysMenuController.add()', 'POST', 1, 'admin', null, '/menu', '127.0.0.1', '', '{"children":[],"createBy":"admin","icon":"client","isCache":"0","isFrame":"1","menuName":"哔哩哔哩","menuType":"C","orderNum":1,"params":{},"parentId":2001,"path":"/bili","perms":"crawler:bili","status":"0","visible":"0"}', '{"msg":"操作成功","code":200}', 0, null, '2024-05-06 11:53:09', 27);
INSERT INTO `ry-cloud`.sys_oper_log (oper_id, title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time) VALUES (8, '菜单管理', 2, 'com.ruoyi.system.controller.SysMenuController.edit()', 'PUT', 1, 'admin', null, '/menu', '127.0.0.1', '', '{"children":[],"createTime":"2024-05-06 11:53:09","icon":"client","isCache":"0","isFrame":"1","menuId":2002,"menuName":"哔哩哔哩","menuType":"C","orderNum":1,"params":{},"parentId":2001,"path":"bili","perms":"crawler:bili","status":"0","updateBy":"admin","visible":"0"}', '{"msg":"操作成功","code":200}', 0, null, '2024-05-06 11:54:18', 37);
INSERT INTO `ry-cloud`.sys_oper_log (oper_id, title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time) VALUES (9, '菜单管理', 2, 'com.ruoyi.system.controller.SysMenuController.edit()', 'PUT', 1, 'admin', null, '/menu', '127.0.0.1', '', '{"children":[],"component":"crawler/bili/index","createTime":"2024-05-06 11:53:09","icon":"client","isCache":"0","isFrame":"1","menuId":2002,"menuName":"哔哩哔哩","menuType":"C","orderNum":1,"params":{},"parentId":2001,"path":"bili","perms":"crawler:bili","status":"0","updateBy":"admin","visible":"0"}', '{"msg":"操作成功","code":200}', 0, null, '2024-05-06 11:57:06', 22);
INSERT INTO `ry-cloud`.sys_oper_log (oper_id, title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time) VALUES (10, '代码生成', 6, 'com.ruoyi.gen.controller.GenController.importTableSave()', 'POST', 1, 'admin', null, '/gen/importTable', '127.0.0.1', '', '{"tables":"crawler_bili_info"}', '{"msg":"操作成功","code":200}', 0, null, '2024-05-06 15:25:51', 122);
INSERT INTO `ry-cloud`.sys_oper_log (oper_id, title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time) VALUES (11, '代码生成', 8, 'com.ruoyi.gen.controller.GenController.batchGenCode()', 'GET', 1, 'admin', null, '/gen/batchGenCode', '127.0.0.1', '', '{"tables":"crawler_bili_info"}', null, 0, null, '2024-05-06 15:25:55', 136);
INSERT INTO `ry-cloud`.sys_oper_log (oper_id, title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time) VALUES (12, '参数管理', 9, 'com.ruoyi.system.controller.SysConfigController.refreshCache()', 'DELETE', 1, 'admin', null, '/config/refreshCache', '127.0.0.1', '', '{}', '{"msg":"操作成功","code":200}', 0, null, '2024-05-07 01:29:36', 35);
INSERT INTO `ry-cloud`.sys_oper_log (oper_id, title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time) VALUES (13, '参数管理', 2, 'com.ruoyi.system.controller.SysConfigController.edit()', 'PUT', 1, 'admin', null, '/config', '127.0.0.1', '', '{"configId":4,"configKey":"sys.account.registerUser","configName":"账号自助-是否开启用户注册功能","configType":"Y","configValue":"true","createBy":"admin","createTime":"2024-05-05 14:20:29","params":{},"remark":"是否开启注册用户功能（true开启，false关闭）","updateBy":"admin"}', '{"msg":"操作成功","code":200}', 0, null, '2024-05-07 01:29:47', 13);
INSERT INTO `ry-cloud`.sys_oper_log (oper_id, title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time) VALUES (14, '角色管理', 2, 'com.ruoyi.system.controller.SysRoleController.edit()', 'PUT', 1, 'admin', null, '/role', '127.0.0.1', '', '{"admin":false,"createTime":"2024-05-05 15:16:22","dataScope":"1","delFlag":"0","deptCheckStrictly":true,"flag":false,"menuCheckStrictly":true,"menuIds":[2000,4,2001,2002],"params":{},"remark":"普通用户","roleId":100,"roleKey":"user","roleName":"普通用户","roleSort":2,"status":"0","updateBy":"admin"}', '{"msg":"操作成功","code":200}', 0, null, '2024-05-07 01:32:38', 41);
INSERT INTO `ry-cloud`.sys_oper_log (oper_id, title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time) VALUES (15, '用户管理', 2, 'com.ruoyi.system.controller.SysUserController.edit()', 'PUT', 1, 'admin', null, '/user', '127.0.0.1', '', '{"admin":false,"avatar":"","createBy":"admin","createTime":"2024-05-05 15:18:30","delFlag":"0","dept":{"ancestors":"0","children":[],"deptId":100,"deptName":"晚风科技","leader":"刘卓昊","orderNum":0,"params":{},"parentId":0,"status":"0"},"deptId":100,"email":"804121985@qq.com","loginIp":"","nickName":"晚风","params":{},"phonenumber":"13453665895","postIds":[5],"remark":"测试用","roleIds":[100],"roles":[{"admin":false,"dataScope":"1","deptCheckStrictly":false,"flag":false,"menuCheckStrictly":false,"params":{},"roleId":100,"roleKey":"user","roleName":"普通用户","roleSort":2,"status":"0"}],"sex":"0","status":"0","updateBy":"admin","userId":100,"userName":"wanfeng"}', '{"msg":"操作成功","code":200}', 0, null, '2024-05-07 01:33:16', 30);
INSERT INTO `ry-cloud`.sys_oper_log (oper_id, title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time) VALUES (16, '在线用户', 7, 'com.ruoyi.system.controller.SysUserOnlineController.forceLogout()', 'DELETE', 1, 'admin', null, '/online/71b62717-f253-4b71-a8dc-019590a5badf', '127.0.0.1', '', '{}', '{"msg":"操作成功","code":200}', 0, null, '2024-05-07 01:34:38', 5);
INSERT INTO `ry-cloud`.sys_oper_log (oper_id, title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time) VALUES (17, '代码生成', 3, 'com.ruoyi.gen.controller.GenController.remove()', 'DELETE', 1, 'admin', null, '/gen/1', '127.0.0.1', '', '{}', '{"msg":"操作成功","code":200}', 0, null, '2024-05-07 09:32:37', 89);
INSERT INTO `ry-cloud`.sys_oper_log (oper_id, title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time) VALUES (18, '代码生成', 6, 'com.ruoyi.gen.controller.GenController.importTableSave()', 'POST', 1, 'admin', null, '/gen/importTable', '127.0.0.1', '', '{"tables":"sys_user_push_prop"}', '{"msg":"操作成功","code":200}', 0, null, '2024-05-07 09:32:42', 81);
INSERT INTO `ry-cloud`.sys_oper_log (oper_id, title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time) VALUES (19, '用户管理', 2, 'com.ruoyi.system.controller.SysUserController.edit()', 'PUT', 1, 'admin', null, '/user', '127.0.0.1', '', '{"admin":false,"avatar":"","createBy":"admin","createTime":"2024-05-05 15:18:30","delFlag":"0","dept":{"ancestors":"0","children":[],"deptId":100,"deptName":"晚风科技","leader":"刘卓昊","orderNum":0,"params":{},"parentId":0,"status":"0"},"deptId":100,"email":"804121985@qq.com","loginIp":"","nickName":"晚风","params":{},"phonenumber":"13453665895","postIds":[5],"remark":"测试用","roleIds":[100],"roles":[{"admin":false,"dataScope":"1","deptCheckStrictly":false,"flag":false,"menuCheckStrictly":false,"params":{},"roleId":100,"roleKey":"user","roleName":"普通用户","roleSort":2,"status":"0"}],"sex":"0","status":"0","updateBy":"admin","userId":100,"userName":"wanfeng"}', '{"msg":"操作成功","code":200}', 0, null, '2024-05-07 09:59:16', 49);
INSERT INTO `ry-cloud`.sys_oper_log (oper_id, title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time) VALUES (20, '用户管理', 2, 'com.ruoyi.system.controller.SysUserController.edit()', 'PUT', 1, 'admin', null, '/user', '127.0.0.1', '', '{"admin":false,"avatar":"","createBy":"admin","createTime":"2024-05-05 15:18:30","delFlag":"0","dept":{"ancestors":"0","children":[],"deptId":100,"deptName":"晚风科技","leader":"刘卓昊","orderNum":0,"params":{},"parentId":0,"status":"0"},"deptId":100,"email":"804121985@qq.com","loginIp":"","nickName":"晚风","params":{},"phonenumber":"13453665895","postIds":[5],"remark":"测试用","roleIds":[100],"roles":[{"admin":false,"dataScope":"1","deptCheckStrictly":false,"flag":false,"menuCheckStrictly":false,"params":{},"roleId":100,"roleKey":"user","roleName":"普通用户","roleSort":2,"status":"0"}],"sex":"0","status":"0","updateBy":"admin","userId":100,"userName":"wanfeng"}', null, 1, 'Cannot cast java.lang.Object to java.lang.String', '2024-05-07 11:00:26', 54);
INSERT INTO `ry-cloud`.sys_oper_log (oper_id, title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time) VALUES (21, '用户管理', 2, 'com.ruoyi.system.controller.SysUserController.edit()', 'PUT', 1, 'admin', null, '/user', '127.0.0.1', '', '{"admin":false,"avatar":"","createBy":"admin","createTime":"2024-05-05 15:18:30","delFlag":"0","dept":{"ancestors":"0","children":[],"deptId":100,"deptName":"晚风科技","leader":"刘卓昊","orderNum":0,"params":{},"parentId":0,"status":"0"},"deptId":100,"email":"804121985@qq.com","loginIp":"","nickName":"晚风","params":{},"phonenumber":"13453665895","postIds":[5],"remark":"测试用","roleIds":[100],"roles":[{"admin":false,"dataScope":"1","deptCheckStrictly":false,"flag":false,"menuCheckStrictly":false,"params":{},"roleId":100,"roleKey":"user","roleName":"普通用户","roleSort":2,"status":"0"}],"sex":"0","status":"0","updateBy":"admin","userId":100,"userName":"wanfeng"}', null, 1, '
### Error updating database.  Cause: java.sql.SQLException: Field ''base_url'' doesn''t have a default value
### The error may exist in com/ruoyi/system/mapper/PushPropertiesMapper.java (best guess)
### The error may involve com.ruoyi.system.mapper.PushPropertiesMapper.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO sys_user_push_prop  ( user_id,  icon )  VALUES  ( ?,  ? )
### Cause: java.sql.SQLException: Field ''base_url'' doesn''t have a default value
; Field ''base_url'' doesn''t have a default value; nested exception is java.sql.SQLException: Field ''base_url'' doesn''t have a default value', '2024-05-07 11:01:09', 121);
INSERT INTO `ry-cloud`.sys_oper_log (oper_id, title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time) VALUES (22, '用户管理', 2, 'com.ruoyi.system.controller.SysUserController.edit()', 'PUT', 1, 'admin', null, '/user', '127.0.0.1', '', '{"admin":false,"avatar":"","createBy":"admin","createTime":"2024-05-05 15:18:30","delFlag":"0","dept":{"ancestors":"0","children":[],"deptId":100,"deptName":"晚风科技","leader":"刘卓昊","orderNum":0,"params":{},"parentId":0,"status":"0"},"deptId":100,"email":"804121985@qq.com","loginIp":"","nickName":"晚风","params":{},"phonenumber":"13453665895","postIds":[5],"remark":"测试用","roleIds":[100],"roles":[{"admin":false,"dataScope":"1","deptCheckStrictly":false,"flag":false,"menuCheckStrictly":false,"params":{},"roleId":100,"roleKey":"user","roleName":"普通用户","roleSort":2,"status":"0"}],"sex":"0","status":"0","updateBy":"admin","userId":100,"userName":"wanfeng"}', '{"msg":"操作成功","code":200}', 0, null, '2024-05-07 16:04:57', 74);
